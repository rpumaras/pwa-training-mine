```
              _     _  __          _____       _                       _   _
  /\/\   ___ | |__ (_)/ _|_   _    \_   \_ __ | |_ ___  __ _ _ __ __ _| |_(_) ___  _ __     /\/\   __ _ _ __   __ _  __ _  ___ _ __
 /    \ / _ \| '_ \| | |_| | | |    / /\/ '_ \| __/ _ \/ _` | '__/ _` | __| |/ _ \| '_ \   /    \ / _` | '_ \ / _` |/ _` |/ _ \ '__|
/ /\/\ \ (_) | |_) | |  _| |_| | /\/ /_ | | | | ||  __/ (_| | | | (_| | |_| | (_) | | | | / /\/\ \ (_| | | | | (_| | (_| |  __/ |
\/    \/\___/|_.__/|_|_|  \__, | \____/ |_| |_|\__\___|\__, |_|  \__,_|\__|_|\___/|_| |_| \/    \/\__,_|_| |_|\__,_|\__, |\___|_|
                          |___/                        |___/                                                        |___/
```
[![NPM](https://nodei.co/npm/mobify-integration-manager.png?downloads=true&stars=true)](https://nodei.co/npm/mobify-integration-manager/) [![CircleCI](https://circleci.com/gh/mobify/mobify-integration-manager.svg?style=svg&circle-token=c41dc67ed5bb7c6a485789d6e7c1323e7f1649fb)](https://circleci.com/gh/mobify/mobify-integration-manager)

## ðŸ—º Overview

Mobify Integration Manager is a key part of the [Mobify Platform](https://www.mobify.com/integrations/). Integration Manager enables retailers to quickly layer the Mobify Platform onto their existing investments, to deliver innovative mobile experiences while keeping all the benefits of their ecommerce platforms or marketing clouds.

The Integration Manager provides an abstraction layer between your progressive web app and the source of its ecommerce data. This data can come from a dedicated ecommerce platform, a desktop website, or a custom API. To give you a head start on building your app, weâ€™ve included ready-made connectors for Integration Manager that already know how to fetch and update data using popular ecommerce platforms. We also make it easy to create your own custom connector for any data source.

For more detail, read [Ecommerce Integrations](https://docs.mobify.com/progressive-web/latest/ecommerce-integrations/ecommerce-overview/).

### Integration Manager API

Integration Manager provides a set of Redux thunk actions (commands) as its API. To browse the availiable commands, read the [API Reference](https://docs.mobify.com/progressive-web/latest/ecommerce-integrations/api/).

The commands are separated into branches, they are:
- account
- app
- cart
- categories
- checkout
- productSearch
- products

### Connectors

Connectors are ready-made implementations of Integration Manager API that connects to specific ecommerce backend. There are two connectors: [Connector for Salesforce Commerce Cloud](https://docs.mobify.com/progressive-web/latest/ecommerce-integrations/integrating-sfcc/) and [Connector for SAP Hybris](https://docs.mobify.com/progressive-web/latest/ecommerce-integrations/integrating-hybris/). We also provide a barebone implementation called "stub connector" for you to implement a custom connector.

## âš’ Installation

```bash
npm i mobify-integration-manager
```

## ðŸ“– Usage

See [our official Integration Manager documentation](https://docs.mobify.com/progressive-web/latest/ecommerce-integrations/usage/) for detail.

### Initialization

The Integration Manager can be initialized by calling `IntegrationManager.initialize` with the connector.

```js
import IntegrationManager from 'mobify-integration-manager/dist/'
// For example, using SFCC connector
import {Connector} from 'mobify-integration-manager/dist/connectors/sfcc'

IntegrationManager.initialize(Connector({ /* configurations */ }))
```

### Customization

Because we canâ€™t anticipate the needs of every project, weâ€™ve designed the Integration Manager to be extensible and customizable without requiring updates to Mobifyâ€™s Progressive Web SDK. For more information, read the [Extending a Connector](https://docs.mobify.com/progressive-web/latest/ecommerce-integrations/extending-a-connector/) guide.

There are two types of customization: adding new command and overriding existing command.

To add a new command or overriding an existing command, pass an extension object as the second parameter to `IntegrationManager.initialize`.

### Debugging

Integration Manager provides a debugging option that will output console logs showing the entire command tree. Pass `{debug: true}` as the third parameter to `IntegrationManager.initialize`.

```js
import IntegrationManager from 'mobify-integration-manager/dist/'
// For example, using Hybris connector
import {Connector} from '`mobify-integration-manager/dist/connectors/hybris'

IntegrationManager.initialize(Connector({ /* configurations */ }), extension, {debug: true})
```

### Dispatching commands

Commands can be dispatched via accessing them within the singleton Integration Manager object.

```js
import IntegrationManager from 'mobify-integration-manager/dist/'

const submitSignIn = () => (dispatch) => {
	//....
	dispatch(IntegrationManager.accounts.login(username, password))
}
```

## ðŸ‘¨ðŸ»â€ðŸ’» Developing

The Mobify Integration Manager and [Progressive Web SDK](https://github.com/mobify/progressive-web-sdk) are two dependencies of the [Platform Scaffold](https://github.com/mobify/platform-scaffold). To develop this package locally, you will need to have a working Platform Scaffold. Because the Mobify Integration Manager uses some dependencies such as utility functions in the Progressive Web SDK, you will also need to install dependencies for the SDK.

```
    Platform Scaffold
    /               \
   /                 \
  /                   \
SDK(node_modules)  IM(node_modules)  ---link---> IM(local)
      |                                              |
      |  ------------<---npm i---------------------  |
```

### Step 1. Install dependencies
Since you need to develop using a local copy of Integration Manager, run the following command in `platform-scaffold/web/`
```sh
npm i
```
### Step 2. Link mobify-integration-manager
```sh
npm run link:im <path-to-local-im>
```
### Step 3. Start developing
```sh
# Don't forget to build the module!
cd <path-to-local-im> && npm run build && cd -
npm start
```
