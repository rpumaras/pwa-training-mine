"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.setInitialVariantValues = exports.getDefaultVariantId = undefined;

var _keys = require("babel-runtime/core-js/object/keys");

var _keys2 = _interopRequireDefault(_keys);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* * *  *  * *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  * */
/* Copyright (c) 2017 Mobify Research & Development Inc. All rights reserved. */
/* * *  *  * *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  * */

var getInitialSelectedVariant = function getInitialSelectedVariant() {
    var variants = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
    var initialValues = arguments[1];

    return variants.find(function (_ref) {
        var values = _ref.values;

        return (0, _keys2.default)(values).every(function (key) {
            return values[key] === initialValues[key];
        });
    });
};

var getDefaultVariantId = exports.getDefaultVariantId = function getDefaultVariantId(productDetailsData) {
    var variants = productDetailsData.variants,
        initialValues = productDetailsData.initialValues;

    var defaultVariant = getInitialSelectedVariant(variants, initialValues);
    var defaultVariantId = defaultVariant ? defaultVariant.values[productDetailsData.variantType] : null;
    return defaultVariantId;
};

var setInitialVariantValues = exports.setInitialVariantValues = function setInitialVariantValues(variants, id, variationCategories) {
    var currentVariant = variants.find(function (variant) {
        return variant.id === id;
    });
    if (currentVariant) {
        return currentVariant.values;
    }

    var defaultVariant = {};
    variationCategories.forEach(function (_ref2) {
        var id = _ref2.id,
            values = _ref2.values;

        defaultVariant[id] = values[0].value;
    });

    return defaultVariant;
};