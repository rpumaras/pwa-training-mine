'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _defineProperty2 = require('babel-runtime/helpers/defineProperty');

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _handleActions; /* * *  *  * *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  * */
/* Copyright (c) 2017 Mobify Research & Development Inc. All rights reserved. */
/* * *  *  * *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  * */

var _reduxActions = require('redux-actions');

var _reducerUtils = require('progressive-web-sdk/dist/utils/reducer-utils');

var _actions = require('./actions');

var _immutable = require('immutable');

var _immutable2 = _interopRequireDefault(_immutable);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var initialState = _immutable2.default.Map();

// Add project-specific actions here
var reducer = (0, _reduxActions.handleActions)((_handleActions = {}, (0, _defineProperty3.default)(_handleActions, _actions.exampleAction, _reducerUtils.mergePayload), (0, _defineProperty3.default)(_handleActions, _actions.receiveFormInfo, _reducerUtils.mergePayload), (0, _defineProperty3.default)(_handleActions, _actions.receiveCardTypes, _reducerUtils.mergePayload), (0, _defineProperty3.default)(_handleActions, _actions.receiveTitles, function (state, _ref) {
    var titles = _ref.payload.titles;

    return state.updateIn(['enhancements', 'account', 'registerUser', 'fields'], function (fields) {
        return fields.update(fields.findIndex(function (field) {
            return field.get('name') === 'title';
        }), function (field) {
            return field.merge({ options: titles, initialValue: titles && titles.length ? titles[0].code : '' });
        });
    });
}), (0, _defineProperty3.default)(_handleActions, _actions.receiveEnhancements, _reducerUtils.mergePayload), _handleActions), initialState);

exports.default = reducer;