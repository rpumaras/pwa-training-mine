'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
/* * *  *  * *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  * */
/* Copyright (c) 2018 Mobify Research & Development Inc. All rights reserved. */
/* * *  *  * *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  *  * */

// Omit the preloader from the document created by capturing
// This way, if we need to unmobify the page at a later point
// The preloader won't be rerendered with the rest of the captured document
var PRELOADER_CLASSES = exports.PRELOADER_CLASSES = 'preload-remove capture-remove';

var displayPreloader = exports.displayPreloader = function displayPreloader(preloadCss, preloadHtml, preloadJs) {
    var head = document.getElementsByTagName('head');
    var body = document.getElementsByTagName('body');

    // Some older browsers throw exceptions if document.head/document.body doesn't exist
    /* istanbul ignore if */
    if (!head.length || !body.length) {
        return;
    }

    head = head[0];
    body = body[0];

    var style = document.createElement('style');
    var container = document.createElement('div');
    var scriptEl = document.createElement('script');
    var meta = document.createElement('meta');

    meta.name = 'viewport';
    meta.content = 'width=device-width';

    style.className = PRELOADER_CLASSES;
    container.className = 'preloader ' + PRELOADER_CLASSES;
    scriptEl.className = PRELOADER_CLASSES;

    style.innerHTML = preloadCss;
    container.innerHTML = preloadHtml;
    scriptEl.innerHTML = preloadJs;

    head.appendChild(meta);
    head.appendChild(style);

    body.appendChild(container);
    head.appendChild(scriptEl);
};

var hidePreloader = exports.hidePreloader = function hidePreloader() {
    var elements = document.getElementsByClassName(PRELOADER_CLASSES);

    Array.prototype.slice.call(elements).forEach(function (el) {
        el.remove();
    });
};